<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Realtime Signup Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:#f0f2f5;padding:20px}
.box{background:#fff;padding:20px;max-width:350px;margin:auto;border-radius:8px}
input,button{width:100%;padding:10px;margin-top:10px}
button{background:#4267B2;color:#fff;border:0}
#msg{margin-top:15px;white-space:pre-wrap;font-weight:bold}
.ok{color:green}
.err{color:red}
</style>
</head>
<body>

<div class="box">
  <h3>تسجيل (أي اسم / أي لغة)</h3>
  <input id="u" placeholder="اسم المستخدم">
  <input id="p" placeholder="كلمة المرور">
  <button onclick="signup()">تسجيل</button>
  <div id="msg"></div>
</div>

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.16.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.16.0/firebase-database.js"></script>

<script>
const msg = document.getElementById("msg");
function show(t,ok=false){
  msg.className = ok ? "ok" : "err";
  msg.textContent = t;
}

/* config */
const firebaseConfig = {
  apiKey: "AIzaSyAiZsXpUfRB2s__oWRLjjT3yEgZQXOXIuI",
  authDomain: "book-ee927.firebaseapp.com",
  databaseURL: "https://book-ee927-default-rtdb.firebaseio.com",
  projectId: "book-ee927",
  storageBucket: "book-ee927.firebasestorage.app",
  messagingSenderId: "523457475998",
  appId: "1:523457475998:web:395114f92143b4f3d0128f"
};

/* init */
try{
  firebase.initializeApp(firebaseConfig);
  show("⏳ تم تحميل Firebase، جاهز للاختبار...");
}catch(e){
  show("❌ فشل تهيئة Firebase:\n"+e.message);
}

/* signup */
function signup(){
  const u = document.getElementById("u").value.trim();
  const p = document.getElementById("p").value.trim();

  if(!u || !p){
    show("❌ الاسم أو كلمة المرور فارغة");
    return;
  }

  show("⏳ جاري الكتابة في Realtime Database...");

  const id = Date.now(); // ID بسيط
  firebase.database().ref("Users/"+id).set({
    username: u,
    password: p,
    time: new Date().toISOString()
  })
  .then(()=>{
    show("✅ تم التسجيل بنجاح\nID: "+id, true);
  })
  .catch(err=>{
    show("❌ فشل الكتابة:\n"+err.code+"\n"+err.message);
  });
}
</script>

</body>
</html>